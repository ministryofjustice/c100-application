Feature: End to end

  @happy_path
  Scenario: happy path
    Given I am on the homepage
    And I click the "Continue" button

    # Where do the children live?
    Then I fill in "Postcode" with "CV21 2AB"
    And I click the "Continue" button

    # What kind of application do you want to make?
    Then I select "Child arrangements order, prohibited steps order, specific issue order, or to change or end an existing order"
    And I click the "Continue" button

    # Are the children involved in any emergency protection, care or supervision proceedings?
    Then I select "No"
    And I click the "Continue" button

    # Attending a Mediation Information and Assessment Meeting (MIAM)
    Then I select "No"
    Then I click "I understand that I have to attend a MIAM or provide a valid reason for not attending."
    And I click the "Continue" button

    # Have you attended a Mediation Information and Assessment Meeting (MIAM)?
    Then I select "No"
    And I click the "Continue" button

    # Has a mediator confirmed that you do not need to attend a MIAM?
    Then I select "Yes"
    And I click the "Continue" button

    # When did you meet with the mediator?
    Then I enter the date 25-05-2020
    And I click the "Continue" button

    # Enter mediator details
    Then I fill in "Mediator registration number (URN)" with "123"
    And I fill in "Family mediation service name" with "My mediator service"
    And I click the "Continue" button

    # Document from the mediator
    Then I click the "Continue" button

    # Safety concerns
    Then I click the "Continue" button

    # Keeping your contact details private
    Then I select "No"
    And I click the "Continue" button

    # Are the children at risk of being abducted?
    Then I select "No"
    And I click the "Continue" button

    # Do you have any concerns about drug, alcohol or substance abuse?
    Then I select "No"
    And I click the "Continue" button

    # Have the children suffered or are they at risk of suffering domestic or child abuse?
    Then I select "No"
    And I click the "Continue" button

    # Have you suffered or are you at risk of suffering domestic violence or abuse?
    Then I select "No"
    And I click the "Continue" button

    # Do you have any other safety concerns about you or the children?
    Then I select "No"
    And I click the "Continue" button

    # What are you asking the court to decide about the children involved?
    Then I click "Decide who they live with and when"
    And I click the "Continue" button

    # What you’re asking the court to decide about the children
    Then I click the "Continue" button

    # Going to court
    Then I click "I understand what’s involved if I decide to go to court"        
    And I click the "Continue" button

    # Alternative ways to reach an agreement
    Then I click the "Continue" button

    # Negotiation tools and services
    Then I select "No"
    And I click the "Continue" button

    # Professional mediation
    Then I select "No"
    And I click the "Continue" button

    # Lawyer negotiation
    Then I select "No"
    And I click the "Continue" button

    # Collaborative law    
    Then I select "No"
    And I click the "Continue" button

    # Enter the names of the children
    Then I fill in "First name(s)" with "John"
    And I fill in "Last name(s)" with "Doe Junior"
    And I click "Add another child"
    Then I fill in "First name(s)" with "Samantha"
    And I fill in "Last name(s)" with "Doe"
    And I click the "Continue" button

    # Provide details for John Doe Junior
    Then I enter the date 25-05-1990
    And I choose "Male"
    And I click the "Continue" button

    # Which of the decisions you’re asking the court to resolve relate to John Doe Junior?
    Then I click "Decide who they live with and when"
    And I click the "Continue" button

    # Is there a Special Guardianship Order in force in relation to John Doe Junior?
    Then I choose "No"
    And I click the "Continue" button

    # Provide details for Samantha Doe
    Then I enter the date 25-05-1992
    And I choose "Female"
    And I click the "Continue" button

    # Which of the decisions you’re asking the court to resolve relate to Samantha Doe?
    Then I click "Decide who they live with and when"
    And I click the "Continue" button

    # Is there a Special Guardianship Order in force in relation to Samantha Doe?
    Then I choose "No"
    And I click the "Continue" button

    # Further information
    Then in "Are any of the children known to social services?" I select "No"
    And in "Are any of the children the subject of a child protection plan?" I select "No"
    And I click the "Continue" button

    # Do you or any respondents have other children who are not part of this application?
    Then I choose "No"
    And I click the "Continue" button

    # Enter the applicant’s name
    Then I fill in "First name(s)" with "John"
    And I fill in "Last name(s)" with "Doe Senior"
    And I click "Add another applicant"
    Then I fill in "First name(s)" with "Josie"
    And I fill in "Last name(s)" with "Partridge"
    And I click the "Continue" button

    # Provide details for John Doe Senior
    Then in "Have you changed your name?" I select "No"
    And in "Sex" I select "Male"
    And I enter the date 25-05-1972
    And I fill in "Place of birth" with "London"
    And I click the "Continue" button

    # What is John Doe Senior's relationship to John Doe Junior?
    Then I choose "Father"
    And I click the "Continue" button

    # What is John Doe Senior's relationship to Samantha Doe?
    Then I choose "Guardian"
    And I click the "Continue" button

    # Address of John Doe Senior
    Then I fill in "Current postcode" with "CV21 2AB"
    And I click the "Continue" button

    # Select address of John Doe Senior - shows postcode not found
    Then I click the "Continue" button

    # Address details of John Doe Senior
    Then I fill in "Building and street" with "1 house road"
    And I fill in "Town or city" with "Birmingford"
    And in "Have you lived at your current address for more than 5 years?" I select "Yes"
    And I click the "Continue" button

    # Contact details of John Doe Senior
    Then I select "I cannot provide an email address"
    And I fill in "Mobile phone" with "0777 222 2222"
    And in "No, the court cannot leave me a voicemail" I select "No, the court cannot leave me a voicemail"
    And I click the "Continue" button

    # Provide details for Josie Partridge
    Then in "Have you changed your name?" I select "No"
    And in "Sex" I select "Female"
    And I enter the date 25-05-1972
    And I fill in "Place of birth" with "London"
    And I click the "Continue" button

    # What is Josie Partridge's relationship to John Doe Junior?
    Then I choose "Mother"
    And I click the "Continue" button

    # What is Josie Partridge's relationship to Samantha Doe?
    Then I choose "Grandparent"
    And I click the "Continue" button

    # Address of Josie Partridge
    Then I fill in "Current postcode" with "CV21 2AB"
    And I click the "Continue" button

    # Select address of Josie Partridge - shows postcode not found
    Then I click the "Continue" button

    # Address details of Josie Partridge
    Then I fill in "Building and street" with "1 house road"
    And I fill in "Town or city" with "Birmingford"
    And in "Have you lived at your current address for more than 5 years?" I select "Yes"
    And I click the "Continue" button

    # Contact details of Josie Partridge
    Then I select "I cannot provide an email address"
    And I fill in "Mobile phone" with "0777 222 2222"
    And in "No, the court cannot leave me a voicemail" I select "No, the court cannot leave me a voicemail"
    And I click the "Continue" button

    # Will you or any other applicants be legally represented by a solicitor in these proceedings?
    Then I choose "No"
    And I click the "Continue" button

    # Enter the respondent’s name
    Then I fill in "First name(s)" with "Bob"
    And I fill in "Last name(s)" with "Pratchett"
    And I click "Add another respondent"
    Then I fill in "First name(s)" with "Ben"
    And I fill in "Last name(s)" with "Pratchett"
    And I click the "Continue" button

    # Provide details for Bob Pratchett
    Then I click "No" for the radio button "Have they changed their name?"
    And in "Sex" I select "Male"
    And I enter the date 25-05-1972
    And I fill in "Place of birth" with "London"
    And I click the "Continue" button

    # What is Bob Pratchett's relationship to John Doe Junior?
    Then I choose "Guardian"
    And I click the "Continue" button

    # What is Bob Pratchett's relationship to Samantha Doe?
    Then I choose "Special Guardian"
    And I click the "Continue" button
 
    # Address of Bob Pratchett
    Then I fill in "Current postcode" with "CV21 2DE"
    And I click the "Continue" button

    # Select address of Bob Pratchett - shows postcode not found
    Then I click the "Continue" button

    # Address details of Bob Pratchett
    Then I fill in "Building and street" with "2 house road"
    And I fill in "Town or city" with "Birmingford"
    And in "Have you lived at your current address for more than 5 years?" I select "Yes"
    And I click the "Continue" button

    # Contact details of Bob Pratchett
    Then I select "I don't know their email"
    And I select "I don't know their home phone"
    And I select "I don't know their mobile phone"

    # Provide details for Ben Pratchett
    And I click "No" for the radio button "Have they changed their name?"
    And in "Sex" I select "Male"
    And I enter the date 25-05-1972
    And I fill in "Place of birth" with "London"
    And I click the "Continue" button

    # What is Ben Pratchett's relationship to John Doe Junior?
    Then I choose "Guardian"
    And I click the "Continue" button

    # What is Ben Pratchett's relationship to Samantha Doe?
    Then I choose "Special Guardian"
    And I click the "Continue" button
 
    # Address of Ben Pratchett
    Then I fill in "Current postcode" with "CV21 2DE"
    And I click the "Continue" button

    # Select address of Ben Pratchett - shows postcode not found
    Then I click the "Continue" button

    # Address details of Ben Pratchett
    Then I fill in "Building and street" with "2 house road"
    And I fill in "Town or city" with "Birmingford"
    And in "Have you lived at your current address for more than 5 years?" I select "Yes"
    And I click the "Continue" button

    # Is there anyone else who should know about your application?
    Then I choose "Yes"
    And I click the "Continue" button

    # Enter the other person’s name
    Then I fill in "First name(s)" with "Granny"
    And I fill in "Last name(s)" with "Smith"
    And I click "Add another person"
    Then I fill in "First name(s)" with "Grampy"
    And I fill in "Last name(s)" with "Smith"
    And I click the "Continue" button

    # Provide details for Granny Smith
    Then I click "No" for the radio button "Have they changed their name?"
    And in "Sex" I select "Male"
    And I enter the date 25-05-1952
    And I fill in "Place of birth" with "London"
    And I click the "Continue" button

    # What is Granny Smith's relationship to John Doe Junior?
    Then I choose "Grandparent"
    And I click the "Continue" button

    # What is Granny Smith's relationship to Samantha Doe?
    Then I choose "Other"
    And I fill in "Please specify" with "None"
    And I click the "Continue" button
 
    # Address of Granny Smith
    Then I fill in "Current postcode" with "CV21 2FG"
    And I click the "Continue" button

    # Select address of Granny Smith - shows postcode not found
    Then I click the "Continue" button

    # Address details of Granny Smith
    Then I fill in "Building and street" with "3 house road"
    And I fill in "Town or city" with "Birmingford"
    And I click "Yes" for the radio button "Have you lived at your current address for more than 5 years?"
    And I click the "Continue" button

    # Provide details for Grampy Smith
    Then I click "No" for the radio button "Have they changed their name?"
    And in "Sex" I select "Male"
    And I enter the date 25-05-1952
    And I fill in "Place of birth" with "London"
    And I click the "Continue" button

    # What is Grampy Smith's relationship to John Doe Junior?
    Then I choose "Grandparent"
    And I click the "Continue" button

    # What is Grampy Smith's relationship to Samantha Doe?
    Then I choose "Other"
    And I fill in "Please specify" with "None"
    And I click the "Continue" button
 
    # Address of Grampy Smith
    Then I fill in "Current postcode" with "CV21 2FG"
    And I click the "Continue" button

    # Select address of Grampy Smith - shows postcode not found
    Then I click the "Continue" button

    # Address details of Grampy Smith
    Then I fill in "Building and street" with "3 house road"
    And I fill in "Town or city" with "Birmingford"
    And in "Have you lived at your current address for more than 5 years?" I select "Yes"
    And I click the "Continue" button

    # Who does John Doe Junior currently live with?
    Then I click "Bob Pratchett"
    And I click "Ben Pratchett"
    And I click the "Continue" button

    # Who does Samantha Doe currently live with?
    Then I click "Bob Pratchett"
    And I click "Ben Pratchett"
    And I click the "Continue" button
    
    # Have any of the children in this application been involved in other family court proceedings?
    Then I choose "No"
    And I click the "Continue" button

    # Do you need an urgent hearing?
    Then I choose "No"
    And I click the "Continue" button

    # Are you asking for a without notice hearing?
    Then I choose "No"
    And I click the "Continue" button

    # Is the life of the child or children, a parent, or anyone significant to the children mainly based in a country outside England or Wales?
    Then I choose "No"
    And I click the "Continue" button

    # Do you think another person in this application may be able to apply for a similar order in a country outside England or Wales?
    Then I choose "No"
    And I click the "Continue" button

    # Has a request for information or other assistance involving the children been made to or by another country?
    Then I choose "No"
    And I click the "Continue" button

    # Why are you making this application?        
    Then I fill in "Provide details" with "Change carers for children"

    # Are there any factors that may affect any adult in this application taking part in the court proceedings?
    Then I choose "No"
    And I click the "Continue" button

    # Does anyone in this application need an intermediary to help them in court?
    Then I choose "No"
    And I click the "Continue" button

    # Does anyone in this application have special language requirements?
    Then I click the "Continue" button

    # Do you or the children need specific safety arrangements at court?
    Then I click the "Continue" button

    # Does anyone in this application need assistance or special facilities when attending court?
    Then I click the "Continue" button

    # How would you like to submit your application to court?
    Then I choose "Submit electronically"
    And I fill in "Enter an email address if you would like to get a confirmation" with "test@example.com"
    And I click the "Continue" button

    # Is this email address correct?
    Then I click the "Continue" button

    # How will you pay the application fee?
    Then I choose "Pay with ‘Help with fees’"
    And I fill in "Reference number" with "HWF-111-111"
    And I click the "Continue" button

    # Check your answers
    Then I choose "I believe that the facts stated in this form and any continuation sheet are true"
    And I fill in "Enter your full name" with "John Doe Senior"

    # Your application has been submitted
    Then I should see "Your application has been submitted"
