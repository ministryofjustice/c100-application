<% title t('.page_title') %>

<div class="grid-row">
  <div class="column-two-thirds">
    <%= step_header %>

    <h1 class="heading-xlarge gv-u-heading-xxlarge"><%=t '.heading' %></h1>

    <div role="note" aria-label="Information" class=" panel panel-border-wide info-notice">
      <p><%=t '.body_info' %></p>
    </div>

    <%= step_form @form_object do |f| %>
      <% @existing_records.each.with_index do |respondent, index| %>
        <%= f.fields_for :names_attributes, respondent, index: index do |c| %>
          <%= render partial: 'steps/shared/existing_names', locals: { names_form: f, person: c, legend: t('.record_index', index: index + 1) } %>
        <% end %>
      <% end %>

      <%= render partial: 'steps/shared/new_name', locals: { names_form: f } %>

      <%= f.button t('.btn_add_another'), type: :submit, value: :add_another_name, class: ['button-add', 'link-button'] %>

      <% if @existing_records.any? %>
        <%= link_to t('.btn_remove'), steps_respondent_names_path(@existing_records.last), method: :delete, class: 'link-button' %>
      <% end %>

      <div class="xform-group form-submit">
        <%= f.continue_button %>
      </div>
    <% end %>
  </div>
</div>
